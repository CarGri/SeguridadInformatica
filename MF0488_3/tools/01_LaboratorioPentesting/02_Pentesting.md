# Penetration Testing

En ciberseguridad existen diferentes tipos de pruebas: las auditorías de seguridad, la evaluación de vulnerabilidades y los test de penetración.

Una **auditoría de seguridad** es un **procedimiento que evalúa el nivel de seguridad de una empresa o entidad, analizando sus procesos y comprobando si sus políticas de seguridad se cumplen**. Su principal objetivo es detectar las vulnerabilidades y debilidades de seguridad que pueden ser utilizadas por terceros para robar información, impedir el funcionamiento del sistema, o en general, causar daños a la empresa. 

La **evaluación de vulnerabilidades**, por su parte, se centra en **identificar la vulnerabilidad de un ordenador, sistema o red**; clasificar las vulnerabilidades detectadas y establecer un orden de prioridades para la mitigación de las mismas. La evaluación de vulnerabilidades incluye: 

- verificar la configuración del sistema para conocer las mejores prácticas, 
- entrevistar al personal, 
- revisar el control de acceso a las aplicaciones y al sistema operativo
-  y analizar el acceso físico a los sistemas

### ¿Qué es un Test de Penetración (Pentesting)?

El pentesting es una práctica esencial en la ciberseguridad que permite a las organizaciones identificar y corregir vulnerabilidades antes de que sean explotadas por atacantes malintencionados. Existen diferentes enfoques de pentesting, cada uno con sus propias ventajas y propósitos, y la planificación meticulosa del proceso es clave para su efectividad.

Un **test de penetración**, también conocido como **pentesting**, es una evaluación de seguridad proactiva y autorizada en la que se simulan ataques cibernéticos en un sistema, red, o aplicación con el objetivo de identificar vulnerabilidades que un atacante podría explotar. El objetivo principal es descubrir debilidades en la seguridad antes de que puedan ser aprovechadas por cibercriminales, permitiendo a las organizaciones corregirlas y fortalecer su postura de seguridad.

- **[Wikipedia](https://es.wikipedia.org/wiki/Examen_de_penetraci%C3%B3n)**: Una **prueba de penetración**, o **pentest**, es un ataque a un [sistema informático](https://es.wikipedia.org/wiki/Sistema_informático) con la intención de encontrar las debilidades de seguridad y todo lo que podría tener acceso a ella, su funcionalidad y datos.
- **CISSP Prep Testing**: Una prueba de penetración puede determinar cómo reacciona un sistema ante un ataque, si las defensas de un sistema pueden ser violadas o no y qué información se puede adquirir del sistema.
- **Penetration Testing: Protecting Networks and Systems**: El pentesting es la simulación de un ataque a un sistema, red, equipo u otra instalación, con el objetivo de demostrar qué tan vulnerable sería ese sistema u objetivo ante un ataque real.

***Pentest es la simulación de un ataque a un sistema informático con la intención de encontrar debilidades de seguridad y determinar como dichos sistemas reaccionan a los ataques.***



> Tanto las auditorías de seguridad, la evaluación de vulnerabilidades como los test de penetración requieren permisos y privilegios de acceso administrativo a los sistemas auditados, para poder analizar la configuración del sistema y los privilegios de acceso.



### Cometido del Pentesting

El cometido del pentesting es:

1. **Identificar Vulnerabilidades**: Detectar posibles debilidades en sistemas, redes o aplicaciones.
2. **Evaluar Impacto**: Determinar el impacto que tendría un ataque exitoso.
3. **Probar Controles de Seguridad**: Evaluar la efectividad de las medidas de seguridad existentes.
4. **Cumplimiento Normativo**: Asegurar que las organizaciones cumplan con normativas y estándares de seguridad.
5. **Mejora Continua**: Proveer recomendaciones para mejorar las defensas y prevenir futuros ataques.

### Diferentes Modos de Pentesting

Existen varios enfoques para realizar un test de penetración, los cuales varían en función del nivel de información y acceso que tiene el equipo de pentesters:

1. **Caja Negra (Black Box)**:
   - Los pentesters no tienen acceso previo a la información interna del sistema.
   - Simula un ataque externo en el que el atacante no tiene conocimiento previo del objetivo.
   - Es útil para evaluar cómo se defiende la organización ante un atacante que no tiene información interna.

2. **Caja Blanca (White Box)**:
   - Los pentesters tienen acceso total a la información interna, incluyendo el código fuente, diagramas de red y credenciales.
   - Permite una evaluación más exhaustiva y detallada de las vulnerabilidades.
   - Es útil para analizar el código y la arquitectura desde una perspectiva de seguridad.

3. **Caja Gris (Gray Box)**:
   - Los pentesters tienen acceso limitado a cierta información interna, como credenciales de usuario o diagramas parciales de la red.
   - Simula un ataque de un usuario con acceso interno limitado, como un empleado descontento.
   - Proporciona un equilibrio entre la profundidad del análisis y la perspectiva de un atacante externo.

### Planificación de un Pentesting

La planificación de un test de penetración es crucial para su éxito. Generalmente, el proceso sigue estas etapas:

1. **Alcance y Objetivos**:
   - Definir qué sistemas, redes o aplicaciones serán evaluados. 
   - Establecer los objetivos específicos del pentesting, como identificar vulnerabilidades críticas o evaluar el cumplimiento normativo. Y también que objetivos se quedaran fuera.

2. **Recopilación de Información**:
   - Recolectar toda la información relevante sobre el objetivo.
   - Esto puede incluir el análisis de dominios públicos, escaneos de red, revisión de código (en caja blanca), entre otros.

3. **Identificación de Vulnerabilidades**:
   - Utilizar herramientas automatizadas y técnicas manuales para descubrir fallos de seguridad.
   - Esta fase implica escaneo de puertos, análisis de configuración, pruebas de inyección de código, etc.

4. **Explotación de Vulnerabilidades**:
   - Intentar explotar las vulnerabilidades identificadas para determinar el nivel de acceso que podría obtener un atacante.
   - Esta fase evalúa el impacto real de las vulnerabilidades.

5. **Reporte y Documentación**:
   - Documentar todas las vulnerabilidades encontradas, el proceso de explotación y el impacto potencial.
   - Proveer recomendaciones para mitigar o solucionar las vulnerabilidades.

6. **Revisión Post-Pentest**:
   - Revisar el proceso y los resultados del pentesting con los interesados.
   - Implementar mejoras basadas en los hallazgos y realizar una evaluación de seguimiento si es necesario.

### Fases del Pentesting

Un test de penetración se lleva a cabo en varias fases estructuradas, cada una con un propósito específico. A continuación, se detallan las fases típicas de un pentesting:

1. **Planificación y Alcance (Reconocimiento Pasivo)**:
   - **Definición del Alcance**: Determinar qué sistemas, redes, aplicaciones y áreas de la infraestructura serán evaluados. Esto también incluye la definición de los objetivos específicos del pentesting.
   - **Obtención de Permisos y Aprobaciones**: Asegurar que se tienen todos los permisos necesarios para realizar el pentesting y que las partes involucradas entienden el alcance y las expectativas.
   - **Recopilación de Información**: Recolectar datos sobre el objetivo utilizando fuentes abiertas (OSINT), como registros de dominio, servidores DNS, redes sociales, etc., sin interactuar directamente con los sistemas de la organización.
2. **Reconocimiento Activo (Escaneo y Mapeo)**:
   - **Escaneo de Puertos y Servicios**: Identificar los puertos abiertos, servicios en ejecución y versiones de software para encontrar posibles puntos de entrada.
   - **Análisis de Vulnerabilidades**: Usar herramientas automatizadas para identificar vulnerabilidades conocidas en los sistemas y servicios detectados.
3. **Explotación (Ataque Simulado)**:
   - **Ataque Controlado**: Intentar explotar las vulnerabilidades identificadas para verificar su explotabilidad y determinar el nivel de acceso que un atacante podría obtener.
   - **Escalada de Privilegios**: Si se obtiene acceso, intentar elevar los privilegios para comprometer completamente el sistema o red.
   - **Movilidad Lateral**: Explorar otros sistemas conectados para ver si es posible comprometer más partes de la red.
4. **Post-Explotación y Análisis**:
   - **Mantenimiento de Acceso**: Evaluar la posibilidad de establecer persistencia en el sistema para mantener el acceso en caso de que las vulnerabilidades sean parcheadas.
   - **Extracción de Información**: Identificar y simular la extracción de datos sensibles o valiosos.
   - **Evaluación del Impacto**: Analizar el impacto potencial de las vulnerabilidades explotadas, incluyendo la evaluación del daño que un atacante podría causar.
5. **Reporte y Documentación**:
   - **Documentación de Hallazgos**: Preparar un informe detallado que describa todas las vulnerabilidades encontradas, los métodos de explotación, el impacto potencial, y las recomendaciones para mitigarlas.
   - **Presentación de Resultados**: Compartir el informe con las partes interesadas, explicando los riesgos asociados y cómo pueden ser mitigados.
6. **Remediación y Seguimiento**:
   - **Implementación de Soluciones**: Colaborar con el equipo de TI para implementar las soluciones recomendadas.
   - **Pentesting de Seguimiento**: Realizar un nuevo pentesting o una revisión para asegurarse de que las vulnerabilidades se han corregido adecuadamente.



---

_ref: 

- [Security CISSP All in one exam guide](https://eduarmandov.wordpress.com/wp-content/uploads/2017/05/security-cissp-all-in-one-exam-guide-6th-edition.pdf)

